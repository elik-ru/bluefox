<div class="row"><div class="col-xs-12 col-sm-8">

<%= form_for [@candidate], html: {:class => "form form-horizontal"} do |f| %>
  <%= bform_static "Id" , @candidate.id.to_s if @candidate.persisted? %>
  <%= bform_static "Дата создания" , @candidate.created_at.strftime("%d-%m-%Y %H:%M") if @candidate.persisted? %>

  <%= bform_text "ФИО" , @candidate , :name , f %>
  <%= bform_text "Контакты"   , @candidate , :contact_info , f %>
  <%= bform_text "Пожелания по зарплате"   , @candidate , :salary , f %>
  <%= bform_checkbox "Ищет работу" , @candidate , :is_active , f %>
  <%= bform_multiselect "Навыки"   , @candidate , :ability_names , f , options_for_select(@candidate.abilities.map{|a| [a.name,a.name]}) %>


  <%= bform_static do %>
    <%= f.submit "Сохранить", class: "btn btn-primary" %>
  <% end %>

<% end %>

</div></div>

<script>
$(function(){
  var abilities = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    prefetch: {
      url: '/abilities.json?'+Math.random(),
      filter: function(list) {
        return $.map(list, function(ab) {
          return { name: ab.name }; });
      }
    }
  });
  abilities.initialize();

  var elt = $('#candidate_ability_names');
  elt.tagsinput({
    confirmKeys: [9, 10, 13, 44, 188],
    typeaheadjs: {
      name: 'abilities',
      displayKey: 'name',
      valueKey: 'name',
      source: abilities.ttAdapter()
    }
  });
})
</script>